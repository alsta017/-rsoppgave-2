#!/bin/bash

# Define the packages to be installed
packages=("mysql" "express" "express-session" "cookie-parser" "body-parser" "bcrypt" "multer" "cors")

# Navigate to the kode folder
echo "Navigating to kode folder..."
if (cd .. && cd kode); then
    cd ..
    cd kode
    echo "Now in kode folder."
else
    echo "Failed to navigate to kode folder."
fi

echo "Checking for package.json..."
# Check if package.json exists
if [ ! -f package.json ]; then
    echo "package.json not found."
else
    echo "package.json found."
    for pkg in "${packages[@]}"
    do
        echo "Installing $pkg..."
        npm install $pkg
        echo ""
        echo "Installed $pkg."
    done

    # Update packages to the latest versions allowed by package.json
    echo "Updating packages..."
    npm update
    echo ""
    echo "Packages updated."
fi

echo "Finished. You can now exit"
read